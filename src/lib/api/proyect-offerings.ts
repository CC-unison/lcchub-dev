import { ProyectOffering } from "../types";

const api = {
  data: [
    {
      id: 1,
      attributes: {
        proyect_title: "Analista de Datos",
        company: "FGJE",
        createdAt: "2024-05-04T19:54:47.615Z",
        updatedAt: "2024-05-04T20:11:47.613Z",
        publishedAt: "2024-05-04T19:54:50.172Z",
        issued: "2024-04-27",
        readmore_manual: null,
        readmore_redirect: null,
        readmore_img: {
          data: {
            id: 8,
            attributes: {
              name: "fgje_job.jpg",
              alternativeText: null,
              caption: null,
              width: 1420,
              height: 1874,
              formats: {
                thumbnail: {
                  name: "thumbnail_fgje_job.jpg",
                  hash: "thumbnail_fgje_job_343964ffa9",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 118,
                  height: 156,
                  size: 4.18,
                  sizeInBytes: 4181,
                  url: "/uploads/thumbnail_fgje_job_343964ffa9.jpg",
                },
                small: {
                  name: "small_fgje_job.jpg",
                  hash: "small_fgje_job_343964ffa9",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 379,
                  height: 500,
                  size: 38.66,
                  sizeInBytes: 38655,
                  url: "/uploads/small_fgje_job_343964ffa9.jpg",
                },
                large: {
                  name: "large_fgje_job.jpg",
                  hash: "large_fgje_job_343964ffa9",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 758,
                  height: 1000,
                  size: 127.59,
                  sizeInBytes: 127594,
                  url: "/uploads/large_fgje_job_343964ffa9.jpg",
                },
                medium: {
                  name: "medium_fgje_job.jpg",
                  hash: "medium_fgje_job_343964ffa9",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 568,
                  height: 750,
                  size: 87.43,
                  sizeInBytes: 87427,
                  url: "/uploads/medium_fgje_job_343964ffa9.jpg",
                },
              },
              hash: "fgje_job_343964ffa9",
              ext: ".jpg",
              mime: "image/jpeg",
              size: 275.44,
              url: "/uploads/fgje_job_343964ffa9.jpg",
              previewUrl: null,
              provider: "local",
              provider_metadata: null,
              createdAt: "2024-05-04T19:54:07.865Z",
              updatedAt: "2024-05-04T20:11:29.045Z",
            },
          },
        },
      },
    },
    {
      id: 2,
      attributes: {
        proyect_title: "Desarrollador Frontend",
        company: "DGIDT",
        createdAt: "2024-05-04T19:57:24.758Z",
        updatedAt: "2024-05-04T20:12:10.372Z",
        publishedAt: "2024-05-04T19:57:26.401Z",
        issued: "2023-09-04",
        readmore_manual: null,
        readmore_redirect: null,
        readmore_img: {
          data: {
            id: 9,
            attributes: {
              name: "DGIDT.jpg",
              alternativeText: null,
              caption: null,
              width: 1275,
              height: 1650,
              formats: {
                thumbnail: {
                  name: "thumbnail_DGIDT.jpg",
                  hash: "thumbnail_DGIDT_c464687649",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 120,
                  height: 156,
                  size: 6.65,
                  sizeInBytes: 6646,
                  url: "/uploads/thumbnail_DGIDT_c464687649.jpg",
                },
                small: {
                  name: "small_DGIDT.jpg",
                  hash: "small_DGIDT_c464687649",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 386,
                  height: 500,
                  size: 43.56,
                  sizeInBytes: 43563,
                  url: "/uploads/small_DGIDT_c464687649.jpg",
                },
                medium: {
                  name: "medium_DGIDT.jpg",
                  hash: "medium_DGIDT_c464687649",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 580,
                  height: 750,
                  size: 79.73,
                  sizeInBytes: 79728,
                  url: "/uploads/medium_DGIDT_c464687649.jpg",
                },
                large: {
                  name: "large_DGIDT.jpg",
                  hash: "large_DGIDT_c464687649",
                  ext: ".jpg",
                  mime: "image/jpeg",
                  path: null,
                  width: 773,
                  height: 1000,
                  size: 115.48,
                  sizeInBytes: 115484,
                  url: "/uploads/large_DGIDT_c464687649.jpg",
                },
              },
              hash: "DGIDT_c464687649",
              ext: ".jpg",
              mime: "image/jpeg",
              size: 201.25,
              url: "/uploads/DGIDT_c464687649.jpg",
              previewUrl: null,
              provider: "local",
              provider_metadata: null,
              createdAt: "2024-05-04T19:57:15.638Z",
              updatedAt: "2024-05-04T19:57:15.638Z",
            },
          },
        },
      },
    },
    {
      id: 3,
      attributes: {
        proyect_title: "Apprentice Developer",
        company: "Encora",
        createdAt: "2024-05-04T20:13:21.954Z",
        updatedAt: "2024-05-04T20:13:24.880Z",
        publishedAt: "2024-05-04T20:13:24.874Z",
        issued: "2024-02-01",
        readmore_manual: null,
        readmore_redirect:
          "https://careers.encora.com/application?&gh_jid=4352385007",
        readmore_img: {
          data: null,
        },
      },
    },
    {
      id: 4,
      attributes: {
        proyect_title: "Auxiliar de Programaci칩n",
        company: "Grupo CORASA",
        createdAt: "2024-05-04T20:19:07.204Z",
        updatedAt: "2024-05-04T20:19:09.179Z",
        publishedAt: "2024-05-04T20:19:09.156Z",
        issued: "2023-06-13",
        readmore_manual:
          "Oferta de empleo para estudiante de LCC en Comercializadora Ortega y Accionistas.\n\nSe solicita un auxiliar de programaci칩n. Se requiere que tenga conocimientos b치sicos de programaci칩n, de preferencia con JAVA, spring boot y testing. \n\nPuede ser en modalidad remoto o presencial, se requieren 3-5 horas diarias.\n\nMayores informes\nHeriberto Ortega\nWA: (662) 183 1587\nEmail: hortegag91@grupocorasa.mx",
        readmore_redirect: null,
        readmore_img: {
          data: null,
        },
      },
    },
  ],
  meta: {
    pagination: {
      page: 1,
      pageSize: 25,
      pageCount: 1,
      total: 4,
    },
  },
};

const baseUrl = "http://localhost:1337";
export async function getAllProyectOfferings() {
  try {
    const response = await fetch(
      baseUrl + "/api/proyect-opportunities?populate=*",
      {
        cache: "force-cache",
        next: { revalidate: 3600 },
      },
    );
    const strapiData = await response.json();
    const data: ProyectOffering[] = strapiData.data.map((proyect: any) => ({
      proyect_title: proyect.attributes.proyect_title,
      company: proyect.attributes.company,
      issued: new Date(proyect.attributes.issued),
      readmore_manual: proyect.attributes.readmore_manual,
      readmore_redirect: proyect.attributes.readmore_redirect,
      readmore_img: proyect.attributes.readmore_img.data
        ? baseUrl + proyect.attributes.readmore_img.data.attributes.url
        : "",
    }));

    return data;
  } catch (error) {
    console.error(error);
    return [];
  }
}
